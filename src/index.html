<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="./styles.scss" inline="inline">
</head>

<p class="graphic-title">Percentage of unsolved crimes by victim race</p>

<div class="victims-container">
  <p class="weepeople victims" id="black-victims" data-percentage="33"></p>
  <p class="caption">Black victims: <span class="percentage">33%</span></p>
</div>

<div class="victims-container">
  <p class="weepeople victims" id="white-victims" data-percentage="19"></p>
  <p class="caption">White victims: <span class="percentage">19%</span></p>
</div>

<div id="canvas-container"></div>

<!-- scripts -->
<script>
  const NUM_PEOPLE = 100;
  const ALPHABET = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
  const peoplesPerLine = {
    0: 10,
    460: 20,
    600: 25,
  };
  let peoplePerLine;
  for (const minWidth in peoplesPerLine) {
    console.log(window.innerWidth, minWidth)
    if (window.innerWidth > minWidth) {
      peoplePerLine = peoplesPerLine[minWidth];
    }
  }

  function getIndices(n) {
    const indices = new Array(NUM_PEOPLE).fill().map((_, i) => i);
    // return indices.sort(() => .5 - Math.random()).slice(0, n); // Random
    return indices.slice(0, n); // Front
  }

  function drawPeople(id) {
    const el = document.getElementById(id);
    
    const letters = [];
    const indices = getIndices(parseInt(el.getAttribute('data-percentage')));
    for (let i = 0; i < NUM_PEOPLE; i++) {
      const span = document.createElement('span');
      span.innerText = ALPHABET[(Math.random() * ALPHABET.length) << 0];
      if (indices.includes(i))
        span.classList.add('highlight-person');
      el.appendChild(span);
      if ((i + 1) % peoplePerLine == 0)
        el.appendChild(document.createElement('br'))
    }
  }

  drawPeople('black-victims');
  drawPeople('white-victims');
</script>

<!-- <script src="https://d3js.org/d3.v4.min.js"></script> -->
<!-- <script src="./script.js" inline="inline"></script> -->